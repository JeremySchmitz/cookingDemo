[gd_scene load_steps=8 format=3 uid="uid://djeobadgn1dv6"]

[ext_resource type="Script" uid="uid://bq6s6xn4lyojp" path="res://scripts/story/boat_travel.gd" id="1_otj04"]
[ext_resource type="Texture2D" uid="uid://cctbjqxvenq0r" path="res://resources/Sprites/Travel/map_test_01.png" id="2_duiqf"]
[ext_resource type="Script" uid="uid://bpi0q3ti505ih" path="res://scripts/story/boat_char.gd" id="3_blhhb"]
[ext_resource type="Texture2D" uid="uid://caywa3w0b7r7h" path="res://resources/Sprites/Travel/hurricane.png" id="4_5yjvc"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_otj04"]
vertices = PackedVector2Array(852.867, 177.727, 905.773, 175.32, 932.477, 180.977, 931.469, 197.172, 878.219, 193.82, 970.609, 204.633, 924.023, 229.203, 885.93, 204.391, 636.398, 354.844, 1063.92, 301.172, 1162.02, 311.961, 887.617, 529.281, 851.18, 527.688, 630.531, 408.852, 834.398, 542.172, 837.711, 563.617, 830.367, 572.406, 871.938, 154.547, 870.523, 148.891, 830.133, 152.813, 834.008, 158.867, 326.773, 252, 357.359, 240.813, 361.797, 263, 315.547, 461, 974.188, 188.844, 994.102, 204.898, 1038.74, 220.094, 1050.51, 245.32, 913.57, 270.57, 928.781, 255.367, 891.719, 235.656, 872.156, 228, 900.578, 555.117, 1162.97, 650.953, 894.578, 565.148, 303.594, 570.422, 281.891, 568.969, 285.297, 561.227, 310.609, 553.531, 893.938, 543.508, 756.492, 541.008, 720.602, 530.461, 680.313, 545.711, 604.133, 432.852, 650.383, 558.172, 565.633, 445.313, 757.25, 169.633, 759.781, 189.844, 441.961, 224.039, 224.047, 191, 220.688, 157.352, 643.117, 121.828, 102.203, 348.297, -5.88281, 357.133, -2.10156, -7.11719, 137, -8.9375, 165.859, 19.0703, 179.078, 80.0703, 821.344, 180, 785.563, 201.297, 790.781, 172.633, 811.102, 129.781, 835.563, 203.703, 315.352, 223.438, 436.727, 258.039, 858.547, 225.727, 889.344, 261.773, 566.281, 302.742, 170.977, 392.188, 109.43, 387.602, 776.672, 158.531, 435.039, 101.977, 616.391, 99.0625, 346.906, 119.008, 235.93, 117.969, 199.938, 128.313, 853.273, 199.359, 388.922, 232.203, 261.859, 211, 205.438, 411.719, 185.469, 154.359, 231.969, 461, 192.797, 191, 242.93, 229.93, 648.609, 588.367, 323.359, 613.25, 502.297, 418.008, 529.883, 438.391, 356.227, 647.023, 673.477, 599.25, 606.047, 318.648, 279.203, 252, 394.594, 263, 487.57, 341.844, 514.859, 309.602, 492.156, 381.93, 811.398, 587, 718.406, 593.898, 759.797, 587)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(3, 5, 6, 7, 4), PackedInt32Array(8, 9, 10, 11, 12, 13), PackedInt32Array(14, 12, 15, 16), PackedInt32Array(17, 18, 1), PackedInt32Array(19, 17, 1, 0, 20), PackedInt32Array(21, 22, 23, 24), PackedInt32Array(5, 25, 26), PackedInt32Array(27, 28, 29, 30, 26), PackedInt32Array(5, 26, 30, 6), PackedInt32Array(7, 6, 31, 32), PackedInt32Array(33, 10, 34, 35), PackedInt32Array(36, 37, 38, 39), PackedInt32Array(10, 33, 40, 11), PackedInt32Array(13, 12, 14, 41, 42), PackedInt32Array(13, 42, 43, 44), PackedInt32Array(44, 43, 45, 46), PackedInt32Array(47, 48, 49, 50, 51, 52), PackedInt32Array(28, 9, 8, 29), PackedInt32Array(53, 54, 55, 56, 57, 58), PackedInt32Array(19, 20, 59, 60, 61, 62), PackedInt32Array(60, 59, 63), PackedInt32Array(22, 21, 64), PackedInt32Array(65, 49, 60, 63, 66, 67, 68), PackedInt32Array(69, 70, 53, 58), PackedInt32Array(32, 31, 67, 66), PackedInt32Array(62, 61, 71), PackedInt32Array(52, 62, 71, 47), PackedInt32Array(72, 73, 52, 51, 74), PackedInt32Array(75, 74, 51, 76), PackedInt32Array(58, 75, 76), PackedInt32Array(0, 4, 77), PackedInt32Array(63, 0, 77), PackedInt32Array(63, 77, 66), PackedInt32Array(48, 60, 49), PackedInt32Array(50, 49, 78, 64, 79), PackedInt32Array(80, 69, 58, 81), PackedInt32Array(24, 82, 80, 83, 50, 84), PackedInt32Array(58, 76, 81), PackedInt32Array(80, 81, 83), PackedInt32Array(16, 15, 35), PackedInt32Array(85, 86, 36, 39, 87, 88, 45), PackedInt32Array(34, 89, 86, 90), PackedInt32Array(88, 46, 45), PackedInt32Array(67, 29, 8, 91), PackedInt32Array(78, 22, 64), PackedInt32Array(50, 79, 84), PackedInt32Array(24, 84, 92), PackedInt32Array(24, 92, 21), PackedInt32Array(24, 23, 93), PackedInt32Array(94, 24, 93, 65, 95), PackedInt32Array(67, 91, 68), PackedInt32Array(65, 68, 95), PackedInt32Array(24, 94, 96), PackedInt32Array(24, 96, 87, 39), PackedInt32Array(97, 16, 35, 34), PackedInt32Array(86, 85, 90), PackedInt32Array(97, 34, 90, 98), PackedInt32Array(97, 98, 99)])
outlines = Array[PackedVector2Array]([PackedVector2Array(141, -19, 175, 14, 188, 74, 239, 108, 346, 109, 434, 92, 620, 89, 647, 112, 816, 120, 835, 143, 859, 144, 854, 124, 910, 166, 943, 173, 942, 189, 963, 193, 968, 171, 999, 196, 1046, 212, 1060, 242, 1072, 292, 1172, 303, 1173, 661, 352, 657, 315, 619, 297, 580, 267, 578, 278, 553, 301, 546, 305, 471, 226, 471, 198, 419, 168, 402, 101, 397, 94, 359, -16, 368, -12, -17), PackedVector2Array(755, 551, 721, 541, 684, 555, 660, 565, 659, 582, 675, 589, 717, 584, 759, 577, 808, 577, 821, 567, 823, 552), PackedVector2Array(858, 538, 852, 554, 889, 555, 885, 548, 881, 539), PackedVector2Array(901, 244, 900, 255, 911, 259, 918, 252, 916, 241), PackedVector2Array(775, 171, 768, 175, 769, 183, 778, 187, 780, 176), PackedVector2Array(836, 175, 833, 180, 836, 185, 840, 179), PackedVector2Array(865, 207, 867, 217, 874, 205), PackedVector2Array(430, 236, 391, 242, 369, 248, 370, 253, 394, 253, 428, 249), PackedVector2Array(308, 232, 265, 222, 259, 228, 282, 242, 312, 242), PackedVector2Array(201, 147, 196, 156, 201, 181, 213, 181, 211, 161), PackedVector2Array(565, 313, 520, 319, 498, 345, 502, 380, 511, 412, 534, 429, 565, 435, 599, 424, 621, 404, 626, 358, 600, 327)])

[sub_resource type="NavigationPolygon" id="NavigationPolygon_7ds11"]
vertices = PackedVector2Array(42.3828, -57.1719, 71.9609, -21.6797, 66.0469, 31.5313, 40.4766, 56.1016, 1.92969, 67.9688, -33.5781, 61.0625, -60.1328, 42.3672, -71.0234, 4.78125, -75.9531, -35.6719, -48.4922, -67.0625, 1.86719, -73.9688)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-49, -68, -77, -36, -72, 5, -61, 43, -34, 62, 2, 69, 41, 57, 67, 32, 73, -22, 43, -58, 2, -75)])
agent_radius = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_duiqf"]
size = Vector2(100, 20)

[node name="BoatTravel" type="Node2D"]
script = ExtResource("1_otj04")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_otj04")

[node name="Sprite2D" type="Sprite2D" parent="NavigationRegion2D"]
texture_filter = 1
position = Vector2(581, 323)
scale = Vector2(5.14844, 5.14844)
texture = ExtResource("2_duiqf")

[node name="NavigationRegion2D2" type="NavigationRegion2D" parent="."]
position = Vector2(564, 377)
navigation_polygon = SubResource("NavigationPolygon_7ds11")
travel_cost = 2.0

[node name="Sprite2D" type="Sprite2D" parent="NavigationRegion2D2"]
texture_filter = 1
scale = Vector2(5.148, 5.148)
texture = ExtResource("4_5yjvc")

[node name="BoatChar" type="CharacterBody2D" parent="."]
position = Vector2(404, 325)
script = ExtResource("3_blhhb")

[node name="Polygon2D" type="Polygon2D" parent="BoatChar"]
scale = Vector2(0.645, 0.645)
color = Color(1, 0, 0.133333, 1)
offset = Vector2(-249, -600)
polygon = PackedVector2Array(216, 600, 168, 600, 176, 624, 224, 632, 272, 632, 320, 624, 328, 600, 264, 600, 256, 544, 240, 552, 248, 560, 256, 568, 256, 600)
uv = PackedVector2Array(-336, 16, -384, 16, -376, 40, -328, 48, -280, 48, -232, 40, -224, 16, -288, 16, -296, -40, -312, -32, -304, -24, -296, -16, -296, 16)

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="BoatChar"]
debug_enabled = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="BoatChar"]
position = Vector2(0, 9)
shape = SubResource("RectangleShape2D_duiqf")

[connection signal="moving" from="BoatChar" to="." method="_on_boat_char_moving"]
[connection signal="nextPosition" from="BoatChar" to="." method="_on_boat_char_next_position"]
[connection signal="target_reached" from="BoatChar/NavigationAgent2D" to="BoatChar" method="_on_navigation_agent_2d_target_reached"]
